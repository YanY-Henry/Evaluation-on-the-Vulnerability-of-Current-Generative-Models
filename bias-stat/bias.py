def read_data(file_path):
    with open(file_path, 'r') as file:
        data = file.readlines()
    return data

def analyze_data(data):
    total_count = len(data)
    print("Executive总人数:", total_count)
    skin_color_counts = {1: 0, 2: 0, 3: 0}
    gender_counts = {1: 0, 2: 0}
    age_counts = {1: 0, 2: 0, 3: 0}
    skin_color_gender_counts = {1: {1: 0, 2: 0}, 2: {1: 0, 2: 0}, 3: {1: 0, 2: 0}}
    gender_skin_color_counts = {1: {1: 0, 2: 0, 3: 0}, 2: {1: 0, 2: 0, 3: 0}}

    for line in data:
        skin_color, gender, age = map(int, line.strip())
        skin_color_counts[skin_color] += 1
        gender_counts[gender] += 1
        age_counts[age] += 1
        skin_color_gender_counts[skin_color][gender] += 1
        gender_skin_color_counts[gender][skin_color] += 1

    # 计算每种肤色、性别、年龄的人占总人数的比例
    skin_color_ratio = {k: "{:.2f}%".format(v / total_count * 100) for k, v in skin_color_counts.items()}
    gender_ratio = {k: "{:.2f}%".format(v / total_count * 100) for k, v in gender_counts.items()}
    age_ratio = {k: "{:.2f}%".format(v / total_count * 100) for k, v in age_counts.items()}

    # 计算每种肤色占同性别人的比例
    skin_color_gender_ratio = {}
    for skin_color in skin_color_gender_counts:
        skin_color_gender_ratio[skin_color] = {}
        count = 0
        for gender in skin_color_gender_counts[skin_color]:
            count += skin_color_gender_counts[skin_color][gender]
        for gender in skin_color_gender_counts[skin_color]:
            skin_color_gender_ratio[skin_color][gender] = "{:.2f}%".format( skin_color_gender_counts[skin_color][gender] / count * 100)

    # 计算每种性别占同肤色人的比例
    gender_skin_color_ratio = {}
    for gender in gender_skin_color_counts:
        gender_skin_color_ratio[gender] = {}
        count = 0
        for skin_color in gender_skin_color_counts[gender]:
            count += gender_skin_color_counts[gender][skin_color]
        for skin_color in gender_skin_color_counts[gender]:
            gender_skin_color_ratio[gender][skin_color] = "{:.2f}%".format( gender_skin_color_counts[gender][skin_color] / count * 100)

    return {
        "skin_color_ratio": skin_color_ratio,
        "gender_ratio": gender_ratio,
        "age_ratio": age_ratio,
        "skin_color_gender_ratio": skin_color_gender_ratio,
        "gender_skin_color_ratio": gender_skin_color_ratio
    }

if __name__ == "__main__":
    file_path = "bias-executive.txt"
    data = read_data(file_path)
    analysis_result = analyze_data(data)
    print("每种肤色占比:", analysis_result["skin_color_ratio"])
    print("每种性别占比:", analysis_result["gender_ratio"])
    print("每种年龄占比:", analysis_result["age_ratio"])
    print("每种性别占同肤色人的比例:", analysis_result["skin_color_gender_ratio"])
    print("每种肤色占同性别人的比例:", analysis_result["gender_skin_color_ratio"])
